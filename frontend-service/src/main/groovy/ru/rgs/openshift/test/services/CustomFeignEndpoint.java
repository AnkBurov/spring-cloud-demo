package ru.rgs.openshift.test.services;import com.netflix.hystrix.exception.HystrixBadRequestException;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.http.ResponseEntity;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import ru.rgs.openshift.test.client.RestClientWithCustomConfigFeign;import ru.rgs.openshift.test.exceptions.FeignBadResponseWrapper;import static org.springframework.web.bind.annotation.RequestMethod.GET;/** * Created by jihor on 2017-06-20 */@RestController@Slf4jpublic class CustomFeignEndpoint {    @Autowired    private RestClientWithCustomConfigFeign restClientWithCustomConfigFeign;    @RequestMapping(value = "/business/{name}", method = GET)    public ResponseEntity<String> doBusiness(@PathVariable("name") String name) {        try {            return restClientWithCustomConfigFeign.doBusiness(name);        } catch (HystrixBadRequestException he) {            if (he.getCause() instanceof FeignBadResponseWrapper) {                FeignBadResponseWrapper wrapper = (FeignBadResponseWrapper) he.getCause();                return ResponseEntity.status(wrapper.getStatus())                        .headers(wrapper.getHeaders())                        .body(wrapper.getBody());            }            return ResponseEntity.badRequest()                    .body(he.getMessage());        }    }}