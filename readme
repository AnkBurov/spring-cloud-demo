1. Run Splunk (see https://github.com/outcoldman/docker-splunk):

docker run -d --name splunk-test --hostname splunk -p 8000:8000 --env SPLUNK_START_ARGS="--accept-license" outcoldman/splunk:6.4.1
+ create indexes: acme, acme-slowquery, businessoperations
+ create a test token with permissions to write events to these indexes



2. Run Redis:

docker run -d --name redis-test -v /home/jihor/workitems/ppkiv-172_-_Credit_bureau_scoring_service/redis/storage_data:/data redis redis-server --appendonly yes



3. Run backends:

docker run -d -p 8090:8080 --name backend-a -e "SPRING_APPLICATION_NAME=backend-service-a" -e "SPRING_CLOUD_CONSUL_HOST=172.17.0.5" -e "LOGGING_BUSINESS_INDEX_NAME=businessoperations" -e "LOGGING_DIRECTORY=logs" -e "LOGGING_ENABLE_LOG_TO_FILE=true" -e "LOGGING_ENABLE_LOG_TO_SPLUNK=true" -e "LOGGING_ENVIRONMENT=poc" -e "LOGGING_LEVEL=INFO" -e "LOGGING_NODE=someNiceNode" -e "LOGGING_SLOWQUERY_INDEX_NAME=acme-slowquery" -e "LOGGING_SPARSE=true" -e "LOGGING_SPLUNK_HOST=172.17.0.3" -e "LOGGING_SPLUNK_PORT=8088" -e "LOGGING_SPLUNK_TOKEN=8B9EA553-61D8-4FCD-AB7B-9F5D6CA94345" -e "LOGGING_TECH_INDEX_NAME=acme" -v logs-backend-a:/logs docstore.rgs.ru:5000/openshift-test-backend-service:latest

docker run -d -p 8095:8080 --name backend-b -e "SPRING_APPLICATION_NAME=backend-service-b" -e "SPRING_CLOUD_CONSUL_HOST=172.17.0.5" -e "LOGGING_BUSINESS_INDEX_NAME=businessoperations" -e "LOGGING_DIRECTORY=logs" -e "LOGGING_ENABLE_LOG_TO_FILE=true" -e "LOGGING_ENABLE_LOG_TO_SPLUNK=true" -e "LOGGING_ENVIRONMENT=poc" -e "LOGGING_LEVEL=INFO" -e "LOGGING_NODE=someNiceNode" -e "LOGGING_SLOWQUERY_INDEX_NAME=acme-slowquery" -e "LOGGING_SPARSE=true" -e "LOGGING_SPLUNK_HOST=172.17.0.3" -e "LOGGING_SPLUNK_PORT=8088" -e "LOGGING_SPLUNK_TOKEN=8B9EA553-61D8-4FCD-AB7B-9F5D6CA94345" -e "LOGGING_TECH_INDEX_NAME=acme" -v logs-backend-b:/logs docstore.rgs.ru:5000/openshift-test-backend-service:latest



4. Run frontend:

docker run -d -p 8080:8080 --name frontend -e "SPRING_APPLICATION_NAME=fontend-service" -e "SPRING_CLOUD_CONSUL_HOST=172.17.0.5" -e "CACHING_REDIS_HOST=172.17.0.4" -e "CACHING_REDIS_PORT=6379" -e "LOGGING_BUSINESS_INDEX_NAME=businessoperations" -e "LOGGING_DIRECTORY=logs" -e "LOGGING_ENABLE_LOG_TO_FILE=true" -e "LOGGING_ENABLE_LOG_TO_SPLUNK=true" -e "LOGGING_ENVIRONMENT=poc" -e "LOGGING_LEVEL=INFO" -e "LOGGING_NODE=someNiceNode" -e "LOGGING_SLOWQUERY_INDEX_NAME=acme-slowquery" -e "LOGGING_SPARSE=true" -e "LOGGING_SPLUNK_HOST=172.17.0.3" -e "LOGGING_SPLUNK_PORT=8088" -e "LOGGING_SPLUNK_TOKEN=8B9EA553-61D8-4FCD-AB7B-9F5D6CA94345" -e "LOGGING_TECH_INDEX_NAME=acme" -v logs-frontend:/logs docstore.rgs.ru:5000/openshift-test-frontend-service:latest